# ACAC Net-pts WAR (oWAR / dWAR) ‚Äî Starter Kit

This repo lets you publish a weekly ACAC leaderboard for **oWAR**, **dWAR**, and **tWAR** using **box scores only**.
Your weekly workflow is simple: **drop each game‚Äôs box-score CSV into `data/boxscores/` and run the compute script**.
The website (Streamlit app) reads the generated leaderboard CSV and displays filters and rankings.

## üîß Prerequisites
- Python 3.10+ (3.11 recommended)
- pip (Python package manager)
- GitHub account (optional but recommended for deployment)
- (Optional) Streamlit Community Cloud account for free hosting

## üìÇ Repository Structure
```
acac-war/
  data/
    boxscores/           # ‚ûú Put one CSV per game here (see template below)
    roster_2025.csv      # auto-generated / updated
  compute/
    compute_war.py       # ‚ûú Run this to compute season-to-date leaderboard
  site/
    app.py               # Streamlit app (website)
    requirements.txt
    leaderboard_2025.csv # output generated by the compute script
  .github/workflows/
    weekly.yml           # optional: auto-run every Sunday
  README.md
```

## üßæ Box Score CSV Schema (per player *per game*)
**Columns (exact names):**
```
game_id,date,team_id,team_name,opp_team_id,opp_team_name,
player_name,jersey,pos,class,minutes,
team_pts_for,team_fga,team_fta,team_tov,team_orb,
team_pts_against,opp_fga,opp_fta,opp_tov,opp_orb
```
- One row per **player-game**.
- **Team totals** repeat on each row for that team in that game.
- Minutes across all players on a team should sum to the game total (e.g., **200** in a 40-min game).
- You can leave `pos`, `class`, or `jersey` blank if unknown.

A blank template is provided at: `data/boxscores/boxscore_template.csv`

## ‚ñ∂Ô∏è Quick Start (Local)
1. Create a virtual environment (optional but recommended).
2. Install deps:
   ```bash
   pip install -r site/requirements.txt
   ```
3. (Optional) Test with the provided sample CSVs in `data/boxscores/`.
4. Compute leaderboard:
   ```bash
   python compute/compute_war.py
   ```
   This writes `site/leaderboard_2025.csv` and auto-updates `data/roster_2025.csv`.
5. Launch the website locally:
   ```bash
   streamlit run site/app.py
   ```
6. Open the URL Streamlit prints (usually http://localhost:8501).

## üåê Deploy
### Option A: Streamlit Community Cloud (easiest)
1. Push this repo to GitHub.
2. Go to streamlit.io ‚Üí ‚ÄúNew app‚Äù, connect your repo, set **Main file path** to `site/app.py`.
3. Deploy. Each time you push, the app updates. The app reads `site/leaderboard_2025.csv` produced by the compute script.

### Option B: GitHub Actions (weekly automation)
- The included workflow `.github/workflows/weekly.yml` runs every Sunday and commits the fresh leaderboard.
- Ensure repository Settings ‚Üí Actions ‚Üí Permissions allow **Read and write** so the action can push commits.

## üß† Method (Box Score Mode)
- Possessions (per team-game): `Poss ‚âà FGA + TOV + 0.44*FTA ‚àí ORB`.
- Player on-court exposure per game is **minutes share √ó team possessions**.
- Player on-court ratings:
  - `OffRtg_on = 100 * (Œ£ min_share*PTS_for) / (Œ£ poss_exposure)`
  - `DefRtg_on = 100 * (Œ£ min_share*PTS_against) / (Œ£ poss_exposure)`
- Net splits vs league baseline:
  - `oNet = OffRtg_on ‚àí OffRtg_league`
  - `dNet = OffRtg_league ‚àí DefRtg_on`
  - `tNet = oNet + dNet`
- WAR conversion uses a league constant (default **2.7**) and replacement level (default **10th percentile** of qualified players).

## üß™ Sample Data
Two sample games are provided so you can test end-to-end immediately:
- `2025-10-17_KEY_SAIT.csv`
- `2025-10-18_KEY_RDP.csv`

Run:
```bash
python compute/compute_war.py
streamlit run site/app.py
```

## üõ†Ô∏è Tuning
- Eligibility: adjust `MIN_POSSESSIONS_FOR_PLAYER` in `compute/compute_war.py` (default 300).
- Replacement level: `REPLACEMENT_PERCENTILE` (default 10).
- Wins-per-net-point constant: `WINS_PER_NETPOINT` (default 2.7). Consider tuning with ACAC data.
- Garbage time filters, RAPM adjustments, and finer apportioning can be added later.
